<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸ”¥ QuickToolHub - All-in-One Toolkit</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ===== RESET & BASE ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, sans-serif;
        }

        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #f72585;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #4cc9f0;
            --glass: rgba(255, 255, 255, 0.1);
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        [data-theme="dark"] {
            --light: #121212;
            --dark: #f8f9fa;
            --glass: rgba(255, 255, 255, 0.05);
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: var(--dark);
            transition: all 0.3s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* ===== HEADER ===== */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            margin-bottom: 40px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 28px;
            font-weight: 800;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .logo i {
            background: white;
            color: var(--primary);
            padding: 10px;
            border-radius: 12px;
            animation: pulse 2s infinite;
        }

        .controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .theme-toggle, .terms-btn {
            background: var(--glass);
            border: 1px solid rgba(255,255,255,0.2);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            backdrop-filter: blur(10px);
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .theme-toggle:hover, .terms-btn:hover {
            transform: rotate(15deg);
            background: rgba(255,255,255,0.2);
        }

        /* ===== HERO ===== */
        .hero {
            text-align: center;
            margin-bottom: 50px;
            padding: 40px;
            background: var(--glass);
            border-radius: 24px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .hero h1 {
            font-size: 48px;
            color: white;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #fff, #f72585);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hero p {
            font-size: 18px;
            color: rgba(255,255,255,0.9);
            max-width: 600px;
            margin: 0 auto 30px;
        }

        /* ===== SEARCH ===== */
        .search-box {
            max-width: 600px;
            margin: 0 auto 40px;
            position: relative;
        }

        .search-box input {
            width: 100%;
            padding: 18px 50px 18px 20px;
            border: none;
            border-radius: 50px;
            background: rgba(255,255,255,0.9);
            font-size: 16px;
            box-shadow: var(--shadow);
        }

        .search-box button {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--primary);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
        }

        /* ===== TOOL GRID ===== */
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 50px;
        }

        .tool-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow);
            border: 1px solid rgba(255,255,255,0.3);
        }

        [data-theme="dark"] .tool-card {
            background: rgba(30, 30, 46, 0.95);
        }

        .tool-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }

        .tool-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
        }

        .tool-icon {
            font-size: 48px;
            margin-bottom: 20px;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: float 3s ease-in-out infinite;
        }

        .tool-card h3 {
            font-size: 20px;
            margin-bottom: 10px;
            color: var(--dark);
        }

        .tool-card p {
            color: #666;
            font-size: 14px;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .tool-tags {
            display: flex;
            gap: 8px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        .tag {
            background: rgba(67, 97, 238, 0.1);
            color: var(--primary);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }

        /* ===== TOOL MODAL ===== */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
            z-index: 1001;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-height: 90vh;
            overflow-y: auto;
            display: none;
        }

        [data-theme="dark"] .modal {
            background: #1a1a2e;
            color: white;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }

        .file-upload {
            border: 2px dashed #ddd;
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            margin: 20px 0;
            cursor: pointer;
            transition: all 0.3s;
        }

        .file-upload:hover {
            border-color: var(--primary);
            background: rgba(67, 97, 238, 0.05);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #eee;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            width: 0%;
            transition: width 0.3s;
        }

        .result {
            display: none;
            text-align: center;
            padding: 20px;
            background: rgba(76, 201, 240, 0.1);
            border-radius: 10px;
            margin-top: 20px;
        }

        .size-controls {
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .size-input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .size-unit {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .size-unit button {
            flex: 1;
            padding: 8px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 5px;
            cursor: pointer;
        }

        .size-unit button.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* ===== ANIMATIONS ===== */
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes slideIn {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
            .tools-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
            
            .hero h1 {
                font-size: 32px;
            }
            
            .logo {
                font-size: 22px;
            }
        }

        /* ===== NOTIFICATION ===== */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--primary);
            color: white;
            padding: 12px 20px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            z-index: 10000;
            animation: slideIn 0.3s ease;
            display: none;
        }

        .ad-container {
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            text-align: center;
        }

        .tool-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
            transition: all 0.3s;
        }

        .tool-btn:hover {
            background: var(--secondary);
            transform: translateY(-2px);
        }

        .text-input {
            width: 100%;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 10px;
            margin: 10px 0;
            font-size: 16px;
            resize: vertical;
            min-height: 100px;
        }

        .qr-code-container {
            text-align: center;
            margin: 20px 0;
            padding: 20px;
        }

        #qrCodeCanvas {
            max-width: 100%;
            height: auto;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 10px;
            background: white;
        }
    </style>
</head>
<body data-theme="light">
    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <div class="container">
        <!-- HEADER -->
        <header>
            <div class="logo">
                <i class="fas fa-tools"></i>
                <span>QuickToolHub</span>
            </div>
            <div class="controls">
                <button class="terms-btn" onclick="openTerms()" title="Terms & Conditions">
                    <i class="fas fa-file-contract"></i>
                </button>
                <button class="theme-toggle" onclick="toggleTheme()" title="Toggle Theme">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </header>

        <!-- HERO SECTION -->
        <section class="hero">
            <h1>All Tools in One Place ðŸ”¥</h1>
            <p>100+ free tools for PDF, images, text, videos, and more. No signup required!</p>
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="Search for tools... (PDF, Image, Text)">
                <button onclick="searchTools()"><i class="fas fa-search"></i></button>
            </div>
        </section>

        <!-- AD CONTAINER -->
        <div class="ad-container">
            <p>Advertisement space</p>
        </div>

        <!-- TOOLS GRID -->
        <div class="tools-grid" id="toolsGrid">
            <!-- Tools will be generated here -->
        </div>
    </div>

    <!-- MODAL FOR TOOLS -->
    <div class="modal-overlay" id="modalOverlay" onclick="closeModal()"></div>
    <div class="modal" id="toolModal">
        <div class="modal-header">
            <h2 id="modalTitle">Tool Name</h2>
            <button class="close-modal" onclick="closeModal()">Ã—</button>
        </div>
        <div id="modalContent">
            <!-- Dynamic content will go here -->
        </div>
    </div>

    <script>
        // ===== GLOBAL VARIABLES =====
        let currentFile = null;
        let currentFileType = '';
        let currentSize = 100; // percentage
        let currentUnit = 'percent';
        let processedBlob = null;
        let processedFileName = '';
        
        // ===== TOOLS DATA =====
        const tools = [
            {
                id: 1,
                name: "ðŸ“„ PDF Compressor",
                description: "Reduce PDF file size without losing quality",
                icon: "fas fa-file-pdf",
                color: "#FF6B6B",
                category: "pdf",
                tags: ["PDF", "Compress", "Free"],
                action: "compressPDF"
            },
            {
                id: 2,
                name: "ðŸ–¼ï¸ Image Resizer",
                description: "Resize images to any dimension instantly",
                icon: "fas fa-image",
                color: "#4ECDC4",
                category: "image",
                tags: ["Image", "Resize", "Quick"],
                action: "resizeImage"
            },
            {
                id: 3,
                name: "ðŸ”’ PDF Merger",
                description: "Combine multiple PDF files into one",
                icon: "fas fa-copy",
                color: "#45B7D1",
                category: "pdf",
                tags: ["PDF", "Merge", "Secure"],
                action: "mergePDF"
            },
            {
                id: 4,
                name: "ðŸŽ¨ Watermark Tool",
                description: "Add text or image watermark to PDFs",
                icon: "fas fa-tint",
                color: "#96CEB4",
                category: "pdf",
                tags: ["PDF", "Watermark", "Custom"],
                action: "addWatermark"
            },
            {
                id: 5,
                name: "ðŸ“ Text Extractor",
                description: "Extract text from images (OCR)",
                icon: "fas fa-font",
                color: "#FFEAA7",
                category: "text",
                tags: ["Text", "OCR", "AI"],
                action: "extractText"
            },
            {
                id: 6,
                name: "âš¡ Image Compressor",
                description: "Compress images up to 90% smaller",
                icon: "fas fa-compress-alt",
                color: "#DDA0DD",
                category: "image",
                tags: ["Image", "Compress", "Fast"],
                action: "compressImage"
            },
            {
                id: 7,
                name: "ðŸ”€ Format Converter",
                description: "Convert between PDF, Word, Excel, PPT",
                icon: "fas fa-exchange-alt",
                color: "#98D8C8",
                category: "document",
                tags: ["Convert", "Multi-format", "Free"],
                action: "convertFormat"
            },
            {
                id: 8,
                name: "ðŸŽ¯ QR Code Generator",
                description: "Create custom QR codes for URLs, text",
                icon: "fas fa-qrcode",
                color: "#F7DC6F",
                category: "utility",
                tags: ["QR Code", "Generate", "Business"],
                action: "generateQR"
            },
            {
                id: 9,
                name: "ðŸ“Š Word Counter",
                description: "Count words, characters, sentences",
                icon: "fas fa-calculator",
                color: "#BB8FCE",
                category: "text",
                tags: ["Text", "Counter", "Writer"],
                action: "countWords"
            },
            {
                id: 10,
                name: "ðŸ” PDF Password",
                description: "Add/remove password from PDF files",
                icon: "fas fa-lock",
                color: "#82E0AA",
                category: "pdf",
                tags: ["PDF", "Security", "Encrypt"],
                action: "pdfPassword"
            },
            {
                id: 11,
                name: "ðŸŽ¨ Color Picker",
                description: "Pick colors from screen with eye-dropper",
                icon: "fas fa-eye-dropper",
                color: "#F1948A",
                category: "design",
                tags: ["Color", "Design", "Web"],
                action: "colorPicker"
            },
            {
                id: 12,
                name: "ðŸ’¬ Text to Speech",
                description: "Convert text to natural sounding audio",
                icon: "fas fa-volume-up",
                color: "#85C1E9",
                category: "ai",
                tags: ["AI", "Audio", "Voice"],
                action: "textToSpeech"
            }
        ];

        // ===== INITIALIZE =====
        document.addEventListener('DOMContentLoaded', function() {
            renderTools();
            setupSearch();
            setupTheme();
            // Welcome message removed as requested
        });

        // ===== RENDER TOOLS =====
        function renderTools(filteredTools = tools) {
            const grid = document.getElementById('toolsGrid');
            grid.innerHTML = '';
            
            filteredTools.forEach(tool => {
                const card = document.createElement('div');
                card.className = 'tool-card';
                card.style.animation = 'slideIn 0.5s ease';
                card.onclick = () => openTool(tool);
                
                card.innerHTML = `
                    <div class="tool-icon">
                        <i class="${tool.icon}"></i>
                    </div>
                    <h3>${tool.name}</h3>
                    <p>${tool.description}</p>
                    <div class="tool-tags">
                        ${tool.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                    </div>
                `;
                
                grid.appendChild(card);
            });
        }

        // ===== SEARCH FUNCTION =====
        function setupSearch() {
            const searchInput = document.getElementById('searchInput');
            searchInput.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                const filtered = tools.filter(tool => 
                    tool.name.toLowerCase().includes(searchTerm) ||
                    tool.description.toLowerCase().includes(searchTerm) ||
                    tool.tags.some(tag => tag.toLowerCase().includes(searchTerm))
                );
                renderTools(filtered);
            });
        }

        function searchTools() {
            const searchInput = document.getElementById('searchInput');
            searchInput.focus();
        }

        // ===== TOOL MODAL =====
        function openTool(tool) {
            document.getElementById('modalTitle').textContent = tool.name;
            
            const modalContent = document.getElementById('modalContent');
            
            // Common modal content
            let content = `
                <div class="file-upload" onclick="document.getElementById('fileInput').click()">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <p>Click to upload or drag & drop files</p>
                    <input type="file" id="fileInput" style="display: none;" onchange="handleFileUpload()">
                </div>
                <div class="size-controls" id="sizeControls" style="display: none;">
                    ${getSizeControls()}
                </div>
                <div class="progress-bar" id="progressBar" style="display: none;">
                    <div class="progress" id="progress"></div>
                </div>
                <div class="result" id="resultContainer" style="display: none;">
                    <p id="resultText"></p>
                    <button class="tool-btn" onclick="downloadProcessedFile()">Download</button>
                </div>
            `;
            
            // Tool-specific content
            switch(tool.action) {
                case 'generateQR':
                    content += getQRGenerator();
                    break;
                case 'countWords':
                    content += getWordCounter();
                    break;
                case 'resizeImage':
                case 'compressImage':
                case 'compressPDF':
                    document.getElementById('sizeControls').style.display = 'block';
                    break;
                default:
                    break;
            }
            
            content += `
                <div class="tool-tip">
                    <p>${getToolTip(tool.action)}</p>
                </div>
            `;
            
            modalContent.innerHTML = content;
            
            // Initialize tool-specific functionality
            if (tool.action === 'generateQR') {
                // QR code initialization if needed
            }
            
            if (tool.action === 'countWords') {
                // Word counter initialization if needed
            }
            
            if (['resizeImage', 'compressImage', 'compressPDF'].includes(tool.action)) {
                // Size controls initialization if needed
            }
            
            document.getElementById('modalOverlay').style.display = 'block';
            document.getElementById('toolModal').style.display = 'block';
        }

        // ===== TOOL COMPONENTS =====
        function getSizeControls() {
            return `
                <div class="size-controls" id="sizeControls">
                    <h4><i class="fas fa-ruler"></i> Size Settings</h4>
                    <div class="size-unit">
                        <button onclick="setSizeUnit('percent')" class="${currentUnit === 'percent' ? 'active' : ''}">Percentage (%)</button>
                        <button onclick="setSizeUnit('kb')" class="${currentUnit === 'kb' ? 'active' : ''}">Kilobytes (KB)</button>
                        <button onclick="setSizeUnit('mb')" class="${currentUnit === 'mb' ? 'active' : ''}">Megabytes (MB)</button>
                    </div>
                    <input type="range" min="1" max="100" value="${currentSize}" class="size-input" id="sizeSlider">
                    <div style="text-align: center; margin-top: 10px;">
                        <span id="sizeValue">${currentSize}%</span>
                    </div>
                </div>
            `;
        }

        function getFileUpload() {
            return `
                <div class="file-upload" onclick="document.getElementById('fileInput').click()">
                    <i class="fas fa-cloud-upload-alt" style="font-size: 40px; color: #999; margin-bottom: 10px;"></i>
                    <h3>Click to Upload File</h3>
                    <p>or drag and drop</p>
                    <input type="file" id="fileInput" style="display: none;" onchange="handleFileUpload()">
                </div>
            `;
        }

        function getQRGenerator() {
            return `
                <div class="qr-code-container">
                    <input type="text" id="qrText" placeholder="Enter text">
                    <button onclick="generateQRCode()">Generate</button>
                    <canvas id="qrCodeCanvas"></canvas>
                </div>
            `;
        }

        function getWordCounter() {
            return `
                <div style="margin: 20px 0;">
                    <textarea id="textInput" class="text-input" placeholder="Enter text to count words...">This is a sample text for word counting.</textarea>
                    <div id="wordCountResult" style="text-align: left; padding: 15px; background: #f8f9fa; border-radius: 10px; margin: 15px 0;">
                        <h4>ðŸ“Š Text Statistics:</h4>
                        <p id="countDetails">Loading...</p>
                    </div>
                    <button onclick="copyText()" class="tool-btn">
                        <i class="fas fa-copy"></i> Copy Text
                    </button>
                </div>
            `;
        }

        // ===== FILE PROCESSING FUNCTIONS =====
        function handleFileUpload() {
            const input = document.getElementById('fileInput');
            const file = input.files[0];
            
            if (!file) return;
            
            currentFile = file;
            currentFileType = file.type;
            
            showProgress();
            
            // Get current tool action from modal title
            const toolName = document.getElementById('modalTitle').textContent;
            const tool = tools.find(t => t.name === toolName);
            
            if (tool) {
                setTimeout(async () => {
                    await processFile(file, tool.action);
                }, 1000);
            }
        }

        async function processFile(file, action) {
            try {
                let resultBlob = null;
                
                switch(action) {
                    case 'resizeImage':
                        if (file.type.startsWith('image/')) {
                            resultBlob = await resizeImage(file, currentSize);
                        } else {
                            throw new Error('Please upload an image file');
                        }
                        break;
                        
                    case 'compressImage':
                        if (file.type.startsWith('image/')) {
                            resultBlob = await compressImage(file, currentSize);
                        } else {
                            throw new Error('Please upload an image file');
                        }
                        break;
                        
                    case 'compressPDF':
                        // For PDF, we'll create a demo version (in real app, use pdf-lib)
                        if (file.type === 'application/pdf') {
                            resultBlob = await simulatePDFCompression(file);
                        } else {
                            throw new Error('Please upload a PDF file');
                        }
                        break;
                        
                    default:
                        // For other tools, just use the original file
                        resultBlob = file;
                }
                
                completeProcessing(file, resultBlob, action);
                
            } catch (error) {
                showNotification(`Error: ${error.message}`, 3000);
                hideProgress();
            }
        }

        // ===== REAL IMAGE PROCESSING =====
        async function resizeImage(file, sizePercent) {
            return new Promise((resolve, reject) => {
                const img = new Image();
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    img.src = e.target.result;
                    
                    img.onload = function() {
                        const canvas = document.createElement('canvas');
                        const ctx = canvas.getContext('2d');
                        
                        // Calculate new dimensions
                        const newWidth = Math.round(img.width * (sizePercent / 100));
                        const newHeight = Math.round(img.height * (sizePercent / 100));
                        
                        // Set canvas size
                        canvas.width = newWidth;
                        canvas.height = newHeight;
                        
                        // Improve image quality
                        ctx.imageSmoothingEnabled = true;
                        ctx.imageSmoothingQuality = 'high';
                        
                        // Draw resized image
                        ctx.drawImage(img, 0, 0, newWidth, newHeight);
                        
                        // Convert to blob
                        canvas.toBlob(function(blob) {
                            if (blob) {
                                resolve(blob);
                            } else {
                                reject(new Error('Failed to process image'));
                            }
                        }, file.type, 0.9);
                    };
                    
                    img.onerror = reject;
                };
                
                reader.onerror = reject;
                reader.readAsDataURL(file);
            });
        }

        async function compressImage(file, qualityPercent) {
            return new Promise((resolve, reject) => {
                const img = new Image();
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    img.src = e.target.result;
                    
                    img.onload = function() {
                        const canvas = document.createElement('canvas');
                        const ctx = canvas.getContext('2d');
                        
                        canvas.width = img.width;
                        canvas.height = img.height;
                        
                        ctx.drawImage(img, 0, 0);
                        
                        // Set quality (lower = more compression)
                        const quality = qualityPercent / 100;
                        
                        canvas.toBlob(function(blob) {
                            if (blob) {
                                resolve(blob);
                            } else {
                                reject(new Error('Failed to compress image'));
                            }
                        }, file.type, quality);
                    };
                    
                    img.onerror = reject;
                };
                
                reader.onerror = reject;
                reader.readAsDataURL(file);
            });
        }

        async function simulatePDFCompression(file) {
            // In a real app, use pdf-lib or similar library
            // This is just a simulation
            return new Promise((resolve) => {
                const reader = new FileReader();
                reader.onload = function(e) {
                    // Create a new blob with same data (simulated compression)
                    const blob = new Blob([e.target.result], { type: 'application/pdf' });
                    resolve(blob);
                };
                reader.readAsArrayBuffer(file);
            });
        }

        // ===== QR CODE GENERATOR =====
        function generateQRCode() {
            const text = document.getElementById('qrText').value || 'https://example.com';
            const canvas = document.getElementById('qrCodeCanvas');
            const ctx = canvas.getContext('2d');
            
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Simple QR code simulation (in real app, use qrcode library)
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            ctx.fillStyle = 'black';
            ctx.font = '16px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('QR Code for:', canvas.width/2, 30);
            
            ctx.font = '12px Arial';
            const lines = wrapText(ctx, text, 20, 60, 160, 20);
            
            // Draw QR code pattern (simulated)
            ctx.fillStyle = 'black';
            drawQRPattern(ctx);
            
            // Save for download
            processedBlob = canvas.toDataURL('image/png');
            processedFileName = 'qr_code.png';
        }

        function drawQRPattern(ctx) {
            const size = 200;
            const moduleSize = 10;
            
            // Draw finder patterns
            ctx.fillRect(20, 20, moduleSize*7, moduleSize*7);
            ctx.fillRect(20, size - moduleSize*7 - 20, moduleSize*7, moduleSize*7);
            ctx.fillRect(size - moduleSize*7 - 20, 20, moduleSize*7, moduleSize*7);
            
            // Draw alignment patterns
            for(let i = 0; i < 5; i++) {
                for(let j = 0; j < 5; j++) {
                    if((i + j) % 2 === 0) {
                        const x = 50 + i * 30;
                        const y = 50 + j * 30;
                        ctx.fillRect(x, y, 10, 10);
                    }
                }
            }
        }

        function wrapText(ctx, text, x, y, maxWidth, lineHeight) {
            const words = text.split(' ');
            const lines = [];
            let line = '';
            
            for(let n = 0; n < words.length; n++) {
                const testLine = line + words[n] + ' ';
                const metrics = ctx.measureText(testLine);
                const testWidth = metrics.width;
                
                if (testWidth > maxWidth && n > 0) {
                    lines.push(line);
                    line = words[n] + ' ';
                } else {
                    line = testLine;
                }
            }
            lines.push(line);
            
            for(let i = 0; i < lines.length; i++) {
                ctx.fillText(lines[i], x, y + (i * lineHeight));
            }
            
            return lines;
        }

        function downloadQRCode() {
            const canvas = document.getElementById('qrCodeCanvas');
            const url = canvas.toDataURL('image/png');
            const a = document.createElement('a');
            a.href = url;
            a.download = 'qr_code.png';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            showNotification('QR Code downloaded successfully!');
        }

        // ===== WORD COUNTER =====
        function countWords() {
            const text = document.getElementById('textInput').value;
            const words = text.trim().split(/\s+/).filter(word => word.length > 0);
            const characters = text.length;
            const charactersNoSpaces = text.replace(/\s/g, '').length;
            const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 0).length;
            const paragraphs = text.split(/\n+/).filter(p => p.trim().length > 0).length;
            
            const result = `
                <p><strong>Words:</strong> ${words.length}</p>
                <p><strong>Characters:</strong> ${characters} (${charactersNoSpaces} without spaces)</p>
                <p><strong>Sentences:</strong> ${sentences}</p>
                <p><strong>Paragraphs:</strong> ${paragraphs}</p>
                <p><strong>Reading Time:</strong> ${Math.ceil(words.length / 200)} minutes</p>
            `;
            
            document.getElementById('countDetails').innerHTML = result;
        }

        function copyText() {
            const text = document.getElementById('textInput').value;
            navigator.clipboard.writeText(text)
                .then(() => showNotification('Text copied to clipboard!'))
                .catch(() => alert('Failed to copy text'));
        }

        // ===== SIZE CONTROLS =====
        function setSizeUnit(unit) {
            currentUnit = unit;
            const buttons = document.querySelectorAll('.size-unit button');
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            updateSizeValue(currentSize);
        }

        function updateSizeValue(value) {
            currentSize = parseInt(value);
            const sizeValue = document.getElementById('sizeValue');
            if (currentUnit === 'percent') {
                sizeValue.textContent = `${value}%`;
            } else if (currentUnit === 'kb') {
                sizeValue.textContent = `${value} KB`;
            } else if (currentUnit === 'mb') {
                sizeValue.textContent = `${value} MB`;
            }
        }

        // ===== PROGRESS FUNCTIONS =====
        function showProgress() {
            const progressBar = document.getElementById('progressBar');
            const progressContainer = document.getElementById('progressContainer');
            const resultContainer = document.getElementById('resultContainer');
            
            progressContainer.style.display = 'block';
            resultContainer.style.display = 'none';
            
            let width = 0;
            const interval = setInterval(() => {
                if (width >= 100) {
                    clearInterval(interval);
                } else {
                    width += 10;
                    progressBar.style.width = width + '%';
                }
            }, 100);
        }

        function hideProgress() {
            const progressContainer = document.getElementById('progressContainer');
            progressContainer.style.display = 'none';
        }

        function completeProcessing(originalFile, resultBlob, action) {
            const resultText = document.getElementById('resultText');
            const resultContainer = document.getElementById('resultContainer');
            const progressContainer = document.getElementById('progressContainer');
            
            const originalSize = formatBytes(originalFile.size);
            const newSize = formatBytes(resultBlob.size);
            
            let message = '';
            
            switch(action) {
                case 'resizeImage':
                    message = `Image resized to ${currentSize}% | ${originalSize} â†’ ${newSize}`;
                    break;
                case 'compressImage':
                    const reduction = Math.round(100 - (resultBlob.size / originalFile.size * 100));
                    message = `Image compressed | ${originalSize} â†’ ${newSize} (${reduction}% smaller)`;
                    break;
                case 'compressPDF':
                    message = `PDF processed | ${originalSize} â†’ ${newSize}`;
                    break;
                default:
                    message = `File processed | ${originalSize}`;
            }
            
            // Store processed file
            processedBlob = resultBlob;
            processedFileName = originalFile.name;
            
            // Show result
            progressContainer.style.display = 'none';
            resultText.textContent = message;
            resultContainer.style.display = 'block';
        }

        function downloadProcessedFile() {
            if (!processedBlob) {
                showNotification('No processed file available!');
                return;
            }
            
            const extension = processedFileName.split('.').pop();
            const baseName = processedFileName.replace(`.${extension}`, '');
            
            // Add tool-specific suffix
            let suffix = '_processed';
            const toolName = document.getElementById('modalTitle').textContent;
            if (toolName.includes('Resize')) suffix = '_resized';
            if (toolName.includes('Compress')) suffix = '_compressed';
            
            const newFileName = `${baseName}${suffix}.${extension}`;
            
            const url = URL.createObjectURL(processedBlob);
            const a = document.createElement('a');
            a.href = url;
            a.download = newFileName;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification(`File downloaded: ${newFileName}`);
        }

        // ===== UTILITY FUNCTIONS =====
        function formatBytes(bytes, decimals = 2) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const dm = decimals < 0 ? 0 : decimals;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];
        }

        function getToolTip(action) {
            const tips = {
                'resizeImage': 'For best quality, resize images proportionally. Social media: 1080x1080 (Instagram), 1200x630 (Facebook)',
                'compressImage': 'JPEG quality 60-80% gives good compression with minimal quality loss. PNG files compress best for graphics.',
                'compressPDF': 'Text-based PDFs compress better than scanned documents. Try 72 DPI for web use.',
                'generateQR': 'Shorter URLs create simpler QR codes that scan faster. Add logo in center for branding.',
                'countWords': 'Average reading speed: 200-250 words per minute. Aim for 15-20 words per sentence for readability.'
            };
            
            return tips[action] || 'Files are processed securely in your browser. No data is sent to servers.';
        }

        // ===== NOTIFICATION SYSTEM =====
        function showNotification(message, duration = 3000) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, duration);
        }

        // ===== THEME TOGGLE =====
        function setupTheme() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.body.setAttribute('data-theme', savedTheme);
            updateThemeIcon(savedTheme);
        }

        function toggleTheme() {
            const currentTheme = document.body.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            
            document.body.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeIcon(newTheme);
        }

        function updateThemeIcon(theme) {
            const icon = document.querySelector('.theme-toggle i');
            icon.className = theme === 'light' ? 'fas fa-moon' : 'fas fa-sun';
        }

        // ===== MODAL FUNCTIONS =====
        function closeModal() {
            document.getElementById('modalOverlay').style.display = 'none';
            document.getElementById('toolModal').style.display = 'none';
            currentFile = null;
            currentFileType = '';
            processedBlob = null;
        }

        // ===== TERMS PAGE =====
        function openTerms() {
            const termsHTML = `
                <!DOCTYPE html>
                <html lang="en">
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>Terms & Conditions - QuickToolHub</title>
                    <style>
                        * {
                            margin: 0;
                            padding: 0;
                            box-sizing: border-box;
                            font-family: 'Segoe UI', system-ui, sans-serif;
                        }

                        body {
                            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                            min-height: 100vh;
                            padding: 20px;
                        }

                        .container {
                            max-width: 800px;
                            margin: 0 auto;
                            background: white;
                            border-radius: 20px;
                            padding: 40px;
                            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
                            animation: slideIn 0.5s ease;
                        }

                        .logo {
                            text-align: center;
                            margin-bottom: 30px;
                        }

                        .logo h1 {
                            color: #4361ee;
                            font-size: 36px;
                        }

                        .logo p {
                            color: #666;
                            margin-top: 10px;
                        }

                        .content {
                            line-height: 1.8;
                            color: #333;
                        }

                        .section {
                            margin-bottom: 30px;
                        }

                        .section h2 {
                            color: #3a0ca3;
                            margin-bottom: 15px;
                            padding-bottom: 10px;
                            border-bottom: 2px solid #f0f0f0;
                        }

                        .section h3 {
                            color: #4361ee;
                            margin: 15px 0 10px;
                        }

                        .section p {
                            margin-bottom: 10px;
                        }

                        .section ul {
                            margin-left: 20px;
                            margin-bottom: 15px;
                        }

                        .section li {
                            margin-bottom: 8px;
                        }

                        .highlight {
                            background: #f8f9fa;
                            padding: 15px;
                            border-radius: 10px;
                            border-left: 4px solid #f72585;
                            margin: 15px 0;
                        }

                        .actions {
                            text-align: center;
                            margin-top: 40px;
                            padding-top: 30px;
                            border-top: 2px solid #f0f0f0;
                        }

                        .btn {
                            display: inline-block;
                            background: #4361ee;
                            color: white;
                            padding: 12px 30px;
                            border-radius: 50px;
                            text-decoration: none;
                            font-weight: bold;
                            margin: 0 10px;
                            transition: all 0.3s;
                            border: none;
                            cursor: pointer;
                            font-size: 16px;
                        }

                        .btn:hover {
                            background: #3a0ca3;
                            transform: translateY(-2px);
                        }

                        .btn-secondary {
                            background: transparent;
                            color: #4361ee;
                            border: 2px solid #4361ee;
                        }

                        @keyframes slideIn {
                            from { transform: translateY(30px); opacity: 0; }
                            to { transform: translateY(0); opacity: 1; }
                        }

                        @media (max-width: 600px) {
                            .container {
                                padding: 20px;
                            }
                            
                            .logo h1 {
                                font-size: 28px;
                            }
                        }
                    </style>
                </head>
                <body>
                    <div class="container">
                        <div class="logo">
                            <h1>ðŸ”§ QuickToolHub</h1>
                            <p>Terms & Conditions</p>
                        </div>

                        <div class="content">
                            <div class="section">
                                <h2>ðŸ“‹ 1. Acceptance of Terms</h2>
                                <p>By using QuickToolHub.com ("Website") and Quick Tool Hub app ("App"), you agree to these Terms & Conditions. If you disagree, please do not use our services.</p>
                            </div>

                            <div class="section">
                                <h2>ðŸ› ï¸ 2. Tool Usage Policy</h2>
                                <div class="highlight">
                                    <h3>âœ… Allowed Uses:</h3>
                                    <ul>
                                        <li>Personal, educational, and non-commercial use</li>
                                        <li>Files you own or have permission to edit</li>
                                        <li>Legal and authorized content only</li>
                                    </ul>
                                </div>
                                
                                <div class="highlight" style="border-left-color: #ff6b6b;">
                                    <h3>âŒ Prohibited Uses:</h3>
                                    <ul>
                                        <li>Commercial use without license</li>
                                        <li>Copyrighted material without permission</li>
                                        <li>Illegal, harmful, or unauthorized content</li>
                                        <li>Automated/bot usage</li>
                                    </ul>
                                </div>
                            </div>

                            <div class="section">
                                <h2>ðŸ”’ 3. Privacy & File Security</h2>
                                <p>Your privacy is our priority:</p>
                                <ul>
                                    <li><strong>Local Processing:</strong> Files are processed in your browser only</li>
                                    <li><strong>No Storage:</strong> We do not store or upload your files</li>
                                    <li><strong>No Sharing:</strong> Files never leave your device</li>
                                    <li><strong>No Tracking:</strong> We don't track personal information</li>
                                </ul>
                            </div>

                            <div class="section">
                                <h2>âš ï¸ 4. Disclaimer</h2>
                                <p>Our tools are provided "as is" without warranties:</p>
                                <ul>
                                    <li>Tools may have limitations</li>
                                    <li>We don't guarantee 100% accuracy</li>
                                    <li>Users are responsible for their actions</li>
                                    <li>Use at your own risk</li>
                                </ul>
                            </div>

                            <div class="section">
                                <h2>ðŸ“ž 5. Contact Us</h2>
                                <p>For questions or concerns:</p>
                                <ul>
                                    <li>Email: QuickToolHub@example.com</li>
                                    <li>Response time: 24-48 hours</li>
                                </ul>
                            </div>
                        </div>

                        <div class="actions">
                            <button onclick="window.history.back()" class="btn">ðŸ  Back to Tools</button>
                            <button onclick="window.print()" class="btn btn-secondary">ðŸ–¨ï¸ Print Terms</button>
                        </div>
                    </div>
                    
                    <script>
                        window.history.back = function() {
                            window.close();
                        };
                    </script>
                </body>
                </html>
            `;

            const termsWindow = window.open('', '_blank', 'width=900,height=700');
            termsWindow.document.write(termsHTML);
            termsWindow.document.close();
        }

        // ===== DRAG AND DROP SUPPORT =====
        document.addEventListener('dragover', (e) => {
            e.preventDefault();
            if (document.getElementById('modalOverlay').style.display === 'block') {
                const fileUpload = document.querySelector('.file-upload');
                if (fileUpload) {
                    fileUpload.style.borderColor = 'var(--primary)';
                    fileUpload.style.background = 'rgba(67, 97, 238, 0.1)';
                }
            }
        });

        document.addEventListener('drop', (e) => {
            e.preventDefault();
            if (document.getElementById('modalOverlay').style.display === 'block') {
                const fileUpload = document.querySelector('.file-upload');
                if (fileUpload && e.dataTransfer.files.length > 0) {
                    const file = e.dataTransfer.files[0];
                    const input = document.getElementById('fileInput');
                    if (input) {
                        const dataTransfer = new DataTransfer();
                        dataTransfer.items.add(file);
                        input.files = dataTransfer.files;
                        handleFileUpload();
                    }
                }
            }
        });

        // ===== KEYBOARD SHORTCUTS =====
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeModal();
            if (e.ctrlKey && e.key === 'k') {
                e.preventDefault();
                document.getElementById('searchInput').focus();
            }
            if (e.ctrlKey && e.key === 'd') {
                e.preventDefault();
                toggleTheme();
            }
        });  
   </script>
</body>
</html>
